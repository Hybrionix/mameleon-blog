---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const { title, description } = Astro.props;
---

<BaseHead title={title} description={description} />
<script>
  if (location.hostname === 'mameleon.com') {
    location.href = 'https://www.mameleon.com' + location.pathname + location.search + location.hash;
  }
</script>
<Header />
<main>
  <slot />
</main>
<Footer />
<head>
  <!-- ...existing head content... -->
  <script>
    // Only run on the client
    (function() {
      const lang = localStorage.getItem('lang');
      const path = window.location.pathname;
      if (lang === 'en' && !path.startsWith('/en/')) {
        // Redirect to English version if not already there
        window.location.pathname = '/en' + (path === '/' ? '' : path);
      } else if (lang === 'nl' && path.startsWith('/en/')) {
        // Redirect to Dutch version if not already there
        window.location.pathname = path.replace(/^\/en/, '') || '/';
      }
    })();
  </script>
</head>