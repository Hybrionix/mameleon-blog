---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const { title, description } = Astro.props;
---
<BaseHead title={title} description={description} />
<script>
  // Domain redirect
  if (location.hostname === 'mameleon.com') {
    location.href = 'https://www.mameleon.com' + location.pathname + location.search + location.hash;
  }
  // Language redirect
  (function() {
    const lang = localStorage.getItem('lang');
    const path = window.location.pathname;
    if (lang === 'en' && !path.startsWith('/en/')) {
      window.location.pathname = '/en' + (path === '/' ? '' : path);
    } else if (lang === 'nl' && path.startsWith('/en/')) {
      window.location.pathname = path.replace(/^\/en/, '') || '/';
    }
  })();
</script>
<Header />
<main>
  <slot />
</main>
<Footer />